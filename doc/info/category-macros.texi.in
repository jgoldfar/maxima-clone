@c==============================================================================
@c Use @fname for additional definitions of maxima functions (defined
@c by @deffn).
@c
@c This is the default.  It is replaced with appropriate definitions
@c for different output form
@macro fname {name}
@*\name\
@end macro
@ifhtml
@unmacro fname
@macro fname {name}
@*@ @ @ @ @b{\name\}
@end macro
@end ifhtml
@iftex
@unmacro fname
@macro fname {name}
@*@t{\name\}
@end macro
@end iftex
@ifinfo
@unmacro fname
@macro fname {name}
@*\name\
@end macro
@end ifinfo

@c==============================================================================
@c Macros for category boxes.  By default, they do nothing.  But for
@c HTML, we redefine them to produce a useful category box to display.
@macro opencatbox {label}
@end macro

@macro category {name}
@end macro

@macro closecatbox {}
@end macro

@ifhtml
@unmacro opencatbox
@macro opencatbox {label}
@html
<div class=categorybox>
\label\
@end html
@end macro

@unmacro category
@macro category {name}
@html
@ref{Category: \name\, \name\}
&middot;
@end html
@end macro

@unmacro closecatbox
@macro closecatbox {}
@html
</div>
@end html
@end macro
@end ifhtml

@c==============================================================================
@c Macros for cross references
@c
@c These are the defaults which will be replaced with appropriate ones
@c for different outputs.
@macro mref {nodename}
@ref{\nodename\,,@code{\nodename\}}
@end macro

@c Like mref, but use TEXT instead of the nodename in the output.
@c Thus, @mxref{beta, beta(a@comma{}b)} will link to the beta
@c function, but the display will be ``beta(a,b)''
@macro mxref {nodename, text}
@ref{\nodename\,,@code{\text\}}
@end macro

@c The following are like @mref, but are followed by a punctuation
@c character because the spacing is off if we do "@mref{foo}."
@macro mrefdot {nodename}
@ref{\nodename\}.
@end macro

@macro mxrefdot {nodename, text}
@mxref{\nodename\, \text\}.
@end macro

@macro mrefcomma {nodename}
@mref{\nodename\},
@end macro

@macro mxrefcomma {nodename, text}
@mxref{\nodename\, \text\},
@end macro

@macro mrefparen {nodename}
@mref{\nodename\}
@end macro

@c Xref macros for the pdf file
@iftex
@tex
\gdef\linkcolor{0 .5 0}
\gdef\urlcolor{0 0 .5}

%% @set txiomitrefpg ==> in TeX, this creates a top-level csname SETtxiomitxrefpg
%% bound to some other than \relax
%% @clear txiomitrefpg ==> bind it to \relax
\gdef\mmref#1{{\def\SETtxiomitxrefpg{true}\def\xrefprintnodename##1{##1}\ref{#1}}}
@end tex

@unmacro mref
@macro mref {nodename}
@code{@mmref{\nodename\}}
@end macro

@unmacro mxref
@macro mxref {nodename, text}
@code{@ref{\nodename\,, \text\}}
@end macro

@end iftex


@c==============================================================================
@c Macros for figures

@ifnottex
@set figuresfolder ./figures
@end ifnottex
@iftex
@set figuresfolder @abs_srcdir@/figures
@end iftex

@c figure takes only one parameter, the name of the figure (without extension)

@c Default implementation.  It is replaced with appropriate
@c definitions for different output formats.
@macro figure {file}
(Figure \file\)
@end macro

@ifhtml
@unmacro figure
@macro figure {file}
@image{@value{figuresfolder}/\file\}
@end macro
@end ifhtml
@iftex
@unmacro figure
@macro figure {file}
@center @image{@value{figuresfolder}/\file\, 10cm}
@end macro
@end iftex
@ifinfo
@unmacro figure
@macro figure {file}
@*(Figure \file\)
@end macro
@end ifinfo

@c altfigure takes two parameters: the name of the figure (without extension)
@c and some text describing the figure.
@ifhtml
@macro altfigure {file, text}
@image{@value{figuresfolder}/\file\, , , \text\}
@end macro
@end ifhtml
@iftex
@macro altfigure {file, text}
@center @image{@value{figuresfolder}/\file\, 10cm, , \text\}
@end macro
@end iftex
@ifinfo
@macro altfigure {file, text}
@*(Figure \file\: \text\)
@end macro
@end ifinfo

@c smallfigure works as altfigure but the image will expand 6cm, rather than
@c 10cm, in the PDF version of the manual.
@ifhtml
@macro smallfigure {file, text}
@image{@value{figuresfolder}/\file\, , , \text\}
@end macro
@end ifhtml
@iftex
@macro smallfigure {file, text}
@center @image{@value{figuresfolder}/\file\, 6cm, , \text\}
@end macro
@end iftex
@ifinfo
@macro smallfigure {file, text}
@*(Figure \file\: \text\)
@end macro
@end ifinfo
